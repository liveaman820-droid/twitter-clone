{% extends "base.html" %}

{% block title %}Home / Twitter Clone{% endblock %}

{% block content %}
<!-- Header -->
<header class="header">
    <div class="header-container">
        <div class="logo">
            <i class="fab fa-twitter"></i>
            <span>Twitter</span>
        </div>
        <div class="search-container">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search Twitter" id="searchInput">
            </div>
        </div>
        <div class="header-right">
            <button class="theme-toggle" id="themeToggle" title="Toggle dark mode">
                <i class="fas fa-moon"></i>
            </button>
            <div class="profile-menu" id="profileMenu">
                <img src="" alt="Profile" class="profile-img" id="currentUserImg">
                <span id="currentUserName">Loading...</span>
                <i class="fas fa-chevron-down"></i>
                <div class="dropdown-menu" id="dropdownMenu">
                    <a href="#" id="profileLink"><i class="fas fa-user"></i> Profile</a>
                    <a href="#" id="settingsLink"><i class="fas fa-cog"></i> Settings</a>
                    <a href="#" id="logoutLink"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Main Container -->
<div class="main-container">
    <!-- Left Sidebar -->
    <aside class="sidebar-left">
        <nav class="nav-menu">
            <div class="nav-item active" data-page="home">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </div>
            <div class="nav-item" data-page="explore">
                <i class="fas fa-hashtag"></i>
                <span>Explore</span>
            </div>
            <div class="nav-item" data-page="notifications">
                <i class="fas fa-bell"></i>
                <span>Notifications</span>
                <span class="notification-count" id="notificationCount" style="display: none;"></span>
            </div>
            <div class="nav-item" data-page="messages">
                <i class="fas fa-envelope"></i>
                <span>Messages</span>
            </div>
            <div class="nav-item" data-page="bookmarks">
                <i class="fas fa-bookmark"></i>
                <span>Bookmarks</span>
            </div>
            <div class="nav-item" data-page="profile">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </div>
        </nav>
        <button class="tweet-btn" id="tweetBtn">
            <i class="fas fa-feather"></i>
            <span>Tweet</span>
        </button>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Tweet Composer -->
        <div class="tweet-composer">
            <div class="composer-header">
                <h2 id="pageTitle">Home</h2>
                <div class="composer-actions">
                    <button class="icon-btn" id="refreshBtn" title="Refresh">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
            <div class="compose-tweet" id="composeSection">
                <img src="" alt="Your avatar" class="avatar" id="composeAvatar">
                <div class="compose-content">
                    <textarea placeholder="What's happening?" id="tweetText" maxlength="280"></textarea>
                    <div class="compose-actions">
                        <div class="compose-options">
                            <button class="option-btn" title="Add emoji" id="emojiBtn">
                                <i class="fas fa-smile"></i>
                            </button>
                        </div>
                        <div class="compose-submit">
                            <div class="character-count">
                                <svg class="progress-ring" width="20" height="20">
                                    <circle class="progress-ring-circle" cx="10" cy="10" r="8" fill="transparent" stroke="#e1e8ed" stroke-width="2"/>
                                    <circle class="progress-ring-progress" cx="10" cy="10" r="8" fill="transparent" stroke="#1da1f2" stroke-width="2"/>
                                </svg>
                                <span id="charCount">280</span>
                            </div>
                            <button class="tweet-submit-btn" id="submitTweet" disabled>Tweet</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <div class="tweet-feed" id="tweetFeed">
                <div class="loading" id="loadingIndicator">
                    <i class="fas fa-spinner fa-spin"></i> Loading tweets...
                </div>
            </div>
            
            <div class="load-more-container" id="loadMoreContainer" style="display: none;">
                <button class="load-more-btn" id="loadMoreBtn">Load more tweets</button>
            </div>
        </div>
    </main>

    <!-- Right Sidebar -->
    <aside class="sidebar-right">
        <!-- Search Results -->
        <div class="widget search-results" id="searchResults" style="display: none;">
            <h3>Search Results</h3>
            <div id="searchContent"></div>
        </div>

        <!-- Trending -->
        <div class="widget trending-widget">
            <h3>What's happening</h3>
            <div id="trendingContent">
                <div class="loading">Loading trends...</div>
            </div>
        </div>

        <!-- Who to follow -->
        <div class="widget follow-widget">
            <h3>Who to follow</h3>
            <div id="suggestedUsers">
                <div class="loading">Loading suggestions...</div>
            </div>
            <div class="show-more">
                <a href="/explore">Show more</a>
            </div>
        </div>

        <!-- Footer -->
        <div class="widget footer-widget">
            <div class="footer-links">
                <a href="#">Terms of Service</a>
                <a href="#">Privacy Policy</a>
                <a href="#">Cookie Policy</a>
                <a href="#">Accessibility</a>
                <a href="#">Ads info</a>
                <a href="#">More</a>
            </div>
            <p>&copy; 2024 Twitter Clone</p>
        </div>
    </aside>
</div>

<!-- Mobile Bottom Navigation -->
<div class="mobile-nav">
    <div class="mobile-nav-item active" data-page="home">
        <i class="fas fa-home"></i>
    </div>
    <div class="mobile-nav-item" data-page="explore">
        <i class="fas fa-hashtag"></i>
    </div>
    <div class="mobile-nav-item" data-page="notifications">
        <i class="fas fa-bell"></i>
    </div>
    <div class="mobile-nav-item" data-page="messages">
        <i class="fas fa-envelope"></i>
    </div>
</div>

<!-- Notifications -->
<div id="notification" class="notification"></div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/home.js') }}"></script>
{% endblock %}